# Roadmap: имплементация нового дизайна WebApp G8 Adjumannya

Документ описывает **план внедрения** нового интерфейса на базе **shadcn-vue** и обновлённого визуального скелета. Цель — не реализовать дизайн сразу, а зафиксировать исследование, маппинг компонентов и поэтапный roadmap.

**Источники:**
- [Аудит бизнес-аналитика](./audit-business-analyst.md) — приоритеты фич, идеи развития
- [Аудит системного аналитика](./audit-system-analyst.md) — данные, API, архитектура
- [SKILL.md](../SKILL.md) — принципы фронтенд-дизайна (типографика, цвет, композиция)
- [shadcn/ui Components](https://ui.shadcn.com/docs/components) — перечень компонентов библиотеки

---

## 1. Резюме исследования

### 1.1 Назначение приложения (из системного аудита)

- **G8 Adjumannya** — групповой челлендж «100 отжиманий в день».
- Точки входа: Telegram-бот и **WebApp (Vue 3 + Pinia + Vite)**.
- WebApp: авторизация через initData → JWT (v2) или токен из бота (v1); добавление отжиманий, результаты за сегодня (с правкой/удалением подходов), лидерборд, календарь, статистика.

### 1.2 Текущий стек WebApp

| Элемент | Сейчас |
|--------|--------|
| Фреймворк | Vue 3, Pinia, Vite |
| Стили | Глобальный `style.css` + scoped в компонентах, кастомные классы (.card, .leaderboard, .calendar и т.д.) |
| Шрифт | Manrope (Google Fonts) |
| UI-библиотека | Нет (собственные компоненты) |
| Tailwind / shadcn | Не установлены |

### 1.3 Текущие компоненты и экраны

| Компонент | Назначение |
|-----------|------------|
| `AppHeader` | Шапка: лого, название приложения |
| `AddBlock` | Ввод числа + кнопка «Добавить» (подход) |
| `TodayResults` | Список участников за день: прогресс-бар, имя, подходы (с редактированием/удалением), интервалы между подходами |
| `ProgressBar` | Визуализация прогресса к цели (100) — «стеклянный» вертикальный бар |
| `Leaderboard` | Лучшие результаты: медали/ранг, имя, значение, дата рекорда |
| `CalendarView` | Сетка месяца, навигация «назад/вперёд», ячейки по тону (empty / mid / high) и число отжиманий |
| `App.vue` | Сборка: блоки «Нет доступа», «Ошибка», AddBlock, TodayResults, Leaderboard, секция «Статистика», CalendarView |

Дополнительно в `App.vue`: статистика (дней участия, всего отжиманий, среднее за день), навигация по месяцам календаря, обработка демо-режима и авторизации.

### 1.4 Ключевые фичи из аудита бизнес-аналитика (для учёта в UI)

- **Высокий приоритет:** серии (streaks), «Мои чаты» (переключатель чата), настраиваемая норма в день.
- **Средний приоритет:** лидерборд за период (неделя/месяц), экспорт данных, достижения (badges), напоминания/цели, сравнение с участником чата, недельный отчёт в боте.
- **Низкий приоритет:** подтверждение при удалении подхода (уже упомянуто в аудите).

При подготовке нового дизайна нужно заложить места под: переключатель чата, отображение серий и настраиваемой нормы, позже — достижения, лидерборд за период, экспорт.

---

## 2. Целевой стек и скелет

### 2.1 Планируемый стек

| Элемент | Цель |
|--------|------|
| Сборка | Vite (без изменений) |
| Фреймворк | Vue 3, Pinia |
| Стили | **Tailwind CSS** + CSS-переменные (тема) |
| Компоненты | **shadcn-vue** ([v3.shadcn-vue.com](https://v3.shadcn-vue.com/docs/installation), [shadcn-vue.com](https://www.shadcn-vue.com/docs/installation)) |
| Инициализация | `npx shadcn-vue@latest init` (Vite, выбор темы и цвета, global CSS) |

**Важно:** в проекте пока **нет** `components.json` и Tailwind/shadcn — скелет предстоит установить по шагам из раздела 4.

### 2.2 Связь с дизайн-концепцией (SKILL.md)

- **Концепция дашборда:** сегодня, подходы, цель 100, участники чата, прогресс по челленджу; календарь с цветовыми ячейками; опционально светлая/тёмная/тёплая тема.
- **SKILL.md:** избегать «AI slop»; чёткая типографика, цветовая палитра, микро-анимации, выразительная композиция; соответствие сложности реализации выбранной эстетике (минимализм vs максимализм).

В roadmap закладываем: единая дизайн-система (переменные для цветов, типографики, отступов) и использование компонентов shadcn как базы, с кастомизацией под выбранный стиль (например, «тёплый мотивирующий» или «чистый минималистичный»).

---

## 3. Маппинг: текущий UI → компоненты shadcn

Используем [документацию shadcn/ui Components](https://ui.shadcn.com/docs/components). Для Vue берём аналог из **shadcn-vue** (те же названия и назначения).

| Текущий блок / элемент | Роль в новом дизайне | Компоненты shadcn (ориентир) |
|------------------------|----------------------|------------------------------|
| Шапка (AppHeader) | Лого + название + опционально переключатель чата | **Avatar**, типографика (**Typography**), позже **Select** или **Dropdown Menu** для «Мои чаты» |
| Карточки секций (.card) | Обёртка секций (сегодня, лидерборд, статистика, календарь) | **Card** (CardHeader, CardContent, CardTitle) |
| AddBlock: input + кнопка | Добавление подхода | **Input** (или **Input Group**), **Button** |
| TodayResults: список строк | Список участников с прогрессом и подходами | **Card**, **Progress** (или кастом на основе **Slider**/визуала), **Button**, **Input** для редактирования; для удаления — **Alert Dialog** (подтверждение) |
| ProgressBar | Прогресс к цели | **Progress** (линейный или кастомное кольцо/бар поверх) |
| Leaderboard: список | Таблица/список лидеров | **Table** или **Card** + список; **Badge** для медалей/ранга; **Avatar** опционально |
| Статистика (числа в списке) | Три метрики | **Card** + типографика или **Stat**-подобный блок (если будет в реестре) |
| CalendarView | Календарь месяца | **Calendar** (shadcn) + кастомная сетка по дням с цветом/значением; навигация — **Button** (icon) |
| Сообщения «Нет доступа» / «Ошибка» | Информационные блоки | **Alert** или **Alert Dialog** |
| Модальное подтверждение удаления | Подтверждение действия | **Alert Dialog** |
| Будущее: переключатель чата | Выбор чата | **Select** или **Dropdown Menu** |
| Будущее: настройки (норма, цель) | Формы настроек | **Form**, **Label**, **Input**, **Switch**, **Button** |
| Будущее: достижения | Сетка значков | **Card**, **Badge**, **Tooltip** |

Компоненты, которые стоит добавить в проект по мере внедрения: **Button**, **Input**, **Card**, **Progress**, **Alert**, **Alert Dialog**, **Table**, **Badge**, **Calendar**, **Select**, **Dropdown Menu**, **Avatar**, **Label**, **Form** (при появлении форм). Ориентир по полному списку: [ui.shadcn.com/docs/components](https://ui.shadcn.com/docs/components).

---

## 4. Этапы имплементации (roadmap)

### Фаза 0: Подготовка и скелет (документация и среда)

- [ ] Зафиксировать выбор темы shadcn-vue (default / New York) и базовый цвет (slate, blue, green и т.д.) в соответствии с [SKILL.md](../SKILL.md).
- [ ] Добавить в репозиторий краткую дизайн-спеку (опционально): палитра (CSS-переменные), шрифты, отступы, скругления — чтобы все компоненты и кастомные блоки опирались на одну базу.
- [ ] Установить Tailwind CSS в `web/` по [официальной инструкции Vite](https://tailwindcss.com/docs/guides/vite).
- [ ] Выполнить `npx shadcn-vue@latest init` в `web/`, выбрать Vite, тему, цвет, путь к global CSS; убедиться, что появились `components.json`, нужные конфиги и папка `components/ui`.
- [ ] Проверить сборку и отображение одного компонента (например, Button) на тестовой странице.

**Результат фазы 0:** в проекте есть рабочий скелет Tailwind + shadcn-vue, можно подключать компоненты.

---

### Фаза 1: Базовая структура и карточки

- [ ] Подключить компоненты: **Card**, **Button**, **Input**, **Label** (по необходимости).
- [ ] Переписать общую разметку `App.vue`: секции обернуть в **Card** (CardHeader/CardContent/CardTitle), заменить сырые кнопки и поля на **Button** и **Input**.
- [ ] Адаптировать **AppHeader**: оставить лого и заголовок, стилизовать через типографику и при необходимости **Avatar**; пока без переключателя чатов.
- [ ] Заменить блок «Добавить подход» (**AddBlock**) на **Card** + **Input** + **Button** без изменения логики (те же props/events).
- [ ] Секции «Нет доступа», «Ошибка» перевести на **Alert** (или **Alert** внутри Card).

**Результат фазы 1:** главная страница визуально строится из shadcn-карточек и контролов; поведение и данные без изменений.

---

### Фаза 2: Сегодня и прогресс

- [ ] Подключить **Progress** (и при необходимости **Skeleton** для загрузки).
- [ ] Переписать **TodayResults**: каждая строка — Card или блок с **Progress**, подписи и список подходов; кнопки редактирования/удаления — **Button** (иконки/текст).
- [ ] Редактирование подхода: inline **Input** + кнопки сохранить/отмена/удалить (**Button**).
- [ ] Удаление: перед вызовом API показывать **Alert Dialog** («Удалить подход N отжиманий?») — закрывает пункт из аудита БА про подтверждение удаления.
- [ ] **ProgressBar** заменить на **Progress** (или композит с Progress) с сохранением логики goal/value и визуала в рамках дизайн-системы.

**Результат фазы 2:** блок «Сегодня» и прогресс к цели полностью на shadcn, с подтверждением удаления.

---

### Фаза 3: Лидерборд и статистика

- [ ] Подключить **Table** и/или **Badge**, **Avatar** (по желанию).
- [ ] Переписать **Leaderboard**: список через **Table** или Card+список; медали/ранг — **Badge** или кастомные иконки в едином стиле.
- [ ] Блок «Статистика» (дней участия, всего отжиманий, среднее): **Card** + типографика или небольшие метрики-карточки в одном ряду.

**Результат фазы 3:** лидерборд и статистика оформлены компонентами shadcn, готовность к добавлению «лидерборд за период» (API уже планируется в аудите).

---

### Фаза 4: Календарь

- [ ] Подключить **Calendar** из shadcn-vue.
- [ ] Переписать **CalendarView**: использовать **Calendar** как основу или кастомную сетку с той же разметкой (дни месяца, Пн–Вс); навигация по месяцам — **Button** с иконками (ChevronLeft/Right или аналог).
- [ ] Сохранить логику тонов ячеек (empty / mid / high) и отображение числа отжиманий; стили ячеек привести к дизайн-системе (цвета из CSS-переменных).

**Результат фазы 4:** календарь на базе shadcn Calendar или согласованной с ним разметки.

---

### Фаза 5: Дизайн-система и полировка

- [ ] Ввести единые CSS-переменные для цветов, скруглений, отступов, теней (в соответствии с выбранной темой и [SKILL.md](../SKILL.md)); при необходимости переопределить токены Tailwind/shadcn.
- [ ] Типографика: выбрать шрифты (например, отличные от Manrope по SKILL — «characterful»), подключить и применить к заголовкам и телу.
- [ ] Опционально: тёмная тема через переключатель и CSS-переменные / класс темы.
- [ ] Микро-анимации: появление секций, переходы (например, `animation-delay` для карточек) — в объёме, соответствующем выбранной эстетике.
- [ ] Адаптивность и доступность: проверить фокусы, контраст, поведение на малых экранах (WebApp часто открывается в узком viewport).

**Результат фазы 5:** целостный визуальный стиль, соответствие SKILL, готовность к добавлению новых фич.

---

### Фаза 6: Новые фичи из аудита (после стабилизации UI)

- [ ] **Мои чаты:** API `GET /api/v2/chats` (из аудита БА); в шапке или настройках — **Select** или **Dropdown Menu** для выбора чата; при смене — перезапрос status/records по `chat_id`.
- [ ] **Серии (streaks):** API `current_streak`, `best_streak` (например, в `GET /api/v2/me/stats` или в истории); отображение в дашборде (блок или строка «Серия: N дней», «Лучшая серия: M»).
- [ ] **Настраиваемая норма в день:** настройка `target_per_day` (форма в настройках или отдельная карточка); отображение в статусе «X/Y» и учёт в Progress и сериях.
- [ ] Дальше по приоритету: лидерборд за период, достижения (badges), экспорт данных, сравнение с участником — с использованием уже введённых компонентов (Card, Table, Badge, Button и т.д.).

---

## 5. Зависимости и риски

| Зависимость | Описание |
|-------------|----------|
| API v2 | Текущий UI уже опирается на v2 (JWT, status, records, history, approaches). Новые фичи (chats, streaks, target_per_day) потребуют доработки бэкенда по аудиту БА. |
| Бот | Ссылка на WebApp с параметрами (token/user_id) не меняется; при добавлении «Мои чаты» важно сохранить совместимость с открытием из бота. |
| Демо-режим | Сохранить `VITE_DEMO` и логику загрузки демо-данных при переписывании компонентов. |

| Риск | Митигация |
|------|-----------|
| Несовместимость shadcn-vue с текущей версией Vue/Vite | Перед фазой 0 проверить совместимость версий в документации shadcn-vue и при необходимости обновить Vue/Vite. |
| Разрыв визуала с дизайн-спекой | Явно зафиксировать в дизайн-спеке цвета и стиль (светлый/тёмный/тёплый) и использовать их в CSS-переменных и теме shadcn. |
| Рост размера бандла | Подключать только нужные компоненты shadcn (добавлять по одному через CLI), не подтягивать всю библиотеку. |

---

## 6. Чеклист перед стартом разработки

- [ ] Прочитаны [audit-business-analyst.md](./audit-business-analyst.md) и [audit-system-analyst.md](./audit-system-analyst.md).
- [ ] Учтены блоки дашборда (сегодня, календарь, статистика, лидерборд) и варианты темы в дизайн-спеке.
- [ ] Выбран вариант темы (светлая / тёмная / тёплая) и базовая палитра.
- [ ] Проверена совместимость shadcn-vue с текущими версиями Vue 3 и Vite в `web/package.json`.
- [ ] Решено, где хранить дизайн-спеку (отдельный файл в `docs/` или раздел в этом roadmap).
- [ ] Фаза 0 (установка скелета) выполняется первой; фазы 1–5 — последовательно; фаза 6 — после стабилизации UI.

---

## 7. Ссылки

- [Аудит бизнес-аналитика](./audit-business-analyst.md)
- [Аудит системного аналитика](./audit-system-analyst.md)
- [SKILL.md (фронтенд-дизайн)](../SKILL.md)
- [shadcn/ui Components](https://ui.shadcn.com/docs/components)
- [shadcn-vue Installation (Vite)](https://v3.shadcn-vue.com/docs/installation/vite) / [shadcn-vue.com](https://www.shadcn-vue.com/docs/installation)

---

*Документ подготовлен как roadmap по результатам исследования; реализация дизайна выполняется отдельно по фазам.*
